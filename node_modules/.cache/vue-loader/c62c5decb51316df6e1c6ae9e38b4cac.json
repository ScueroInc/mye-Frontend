{"remainingRequest":"c:\\Users\\Administrador\\Desktop\\Patro\\Trabajo\\zzz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\Administrador\\Desktop\\Patro\\Trabajo\\zzz\\src\\components\\FinalReport.vue?vue&type=script&lang=js&","dependencies":[{"path":"c:\\Users\\Administrador\\Desktop\\Patro\\Trabajo\\zzz\\src\\components\\FinalReport.vue","mtime":1574506112339},{"path":"c:\\Users\\Administrador\\Desktop\\Patro\\Trabajo\\zzz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\Administrador\\Desktop\\Patro\\Trabajo\\zzz\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\Users\\Administrador\\Desktop\\Patro\\Trabajo\\zzz\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1549812933000},{"path":"c:\\Users\\Administrador\\Desktop\\Patro\\Trabajo\\zzz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\Administrador\\Desktop\\Patro\\Trabajo\\zzz\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios'\nimport jsPDF from 'jspdf'\nimport autoTable from 'jspdf-autotable'\nexport default {\n    data(){\n        return{\n            finalreports:[],\n            dialog: false,\n            headers: [\n                { text: 'Opciones', value: 'opciones', sortable: false },\n                 { text: 'description', value: 'description', sortable: false },\n                { text: 'machinereview', value: 'machinereview', sortable: false },\n                { text: 'reportdate', value: 'reportwdate', sortable: false },\n                \n                \n               \n            ],\n            search:'',\n            editedIndex: -1,\n            //Para crear Order\n            id: '',\n            idmachinereview:'',\n            machinereview:[],\n            descripcion:'',\n            reportdate:'',\n        }\n    },\n\n    //Evaluar si se registra o se edita\n    computed: {\n        \n        formTitle () {\n        return this.editedIndex === -1 ? 'Nueva FinalReport' : 'Actualizar FinalReport'\n        }\n    },\n\n    watch: {\n        dialog (val) {\n        val || this.close()\n        }\n    },\n\n    created () {\n        //Esta propiedad es la primera que se ejecuta al iniciar\n        this.listar()\n        this.select()\n    },\n\n    methods:{\n        crearPDF(){\n            var columns = [\n                {title: \"Description\", dataKey: \"description\"}, \n                {title: \"MedicalReview\", dataKey: \"medicalreview\"}, \n                {title: \"ReportDate\", dataKey: \"reportdate\"}, \n        \n            ];\n            var rows = [];\n\n            this.finalreports.map(function(x){\n                rows.push({description:x.description,medicalreview:x.medicalreview,reportdate:x.reportdate});\n            });\n\n            // Only pt supported (not mm or in)\n            var doc = new jsPDF('p', 'pt');\n            doc.autoTable(columns, rows, {\n                margin: {top: 60},\n                addPageContent: function(data) {\n                    doc.text(\"Listado de FinalReports\", 40, 30);\n                }\n            });\n            doc.save('FinalReports.pdf');\n        },\n        listar(){\n            let me = this;\n            axios.get(\"api/finalreport\").then(function(response){\n                me.finalreports = response.data\n            }).catch(function(error){\n                console.log(error)\n            })\n        },\n        select(){\n            let me = this;\n            var machinereviewArray = []\n            axios.get(\"api/finalreport\").then(function(response){\n               machinereviewArray=response.data\n                machinereviewArray.map(function(x){\n                    me.machinereview.push({text: x.name, value:x.idmachinereview})\n                })\n            }).catch(function(error){\n                console.log(error)\n            })\n        },\n\n        editItem (item) {\n            this.id = item.idfinalreport\n            this.idmachinereview=item.idmachinereview\n            this.description = item.description\n            this.reportdate = item.reportdate\n          \n            this.editedIndex = 1\n            this.dialog = true\n        },\n\n        deleteItem (item) {\n            const index = this.desserts.indexOf(item)\n            confirm('Are you sure you want to delete this item?') && this.desserts.splice(index, 1)\n        },\n\n        close () {\n            this.dialog = false\n            this.limpiar()\n        },\n\n        limpiar(){\n            this.id=\"\"\n            this.idmachinereview=\"\"\n            this.description=\"\"\n            this.reportdate=\"\"\n\n            this.editedIndex=-1\n        },\n\n        guardar () {\n            if(this.validar()){\n                return;\n            }\n            if (this.editedIndex > -1) {\n                //Para editar\n\n                let me = this\n                axios.put(\"api/finalreport\",{\n                    'idfinalreport':me.id,\n                    'idmachinereview':me.idmachinereview,\n                    'description':me.description,\n                    'reportdate':me.reportdate\n                    \n                }).then(function(response){\n                    me.close()\n                    me.listar()\n                    me.limpiar()\n                }).catch(function(error){\n                    console.log(error)\n                })\n            } else {\n                //Para guardar\n                let me = this\n                axios.post(\"api/finalreport\",{\n                   'idmachinereview':me.idmachinereview,\n                    'description':me.description,\n                    'reportdate':me.reportdate\n                   \n                }).then(function(response){\n                    me.close()\n                    me.listar()\n                    me.limpiar()\n                }).catch(function(error){\n                    console.log(error)\n                })\n            }\n            this.close()\n        },\n      \n    \n   \n    }        \n}\n",{"version":3,"sources":["FinalReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA","file":"FinalReport.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <!--Para alinear el contenido-->\r\n    <v-layout align-start>\r\n       <v-flex>\r\n            <v-toolbar flat color=\"white\">\r\n                <v-btn @click=\"crearPDF\"><v-icon>print</v-icon></v-btn>\r\n                <v-toolbar-title>FinalReport</v-toolbar-title>\r\n                <v-divider\r\n                    class=\"mx-2\"\r\n                    inset\r\n                    vertical\r\n                ></v-divider>\r\n                <v-spacer></v-spacer>\r\n                <v-text-field class=\"text-xs-center\" v-model=\"search\" append-icon=\"search\" label=\"Busqueda\" single-line hide-details></v-text-field>\r\n                <v-spacer></v-spacer>\r\n                <v-dialog v-model=\"dialog\" max-width=\"500px\">\r\n                    <template v-slot:activator=\"{ on }\">\r\n                    <v-btn color=\"primary\" dark class=\"mb-2\" v-on=\"on\">Nuevo</v-btn>\r\n                    </template>\r\n                    <v-card>\r\n                    <v-card-title>\r\n                        <span class=\"headline\">{{ formTitle }}</span>\r\n                    </v-card-title>\r\n\r\n                    <v-card-text>\r\n                        <v-container grid-list-md>\r\n                        <v-layout wrap>\r\n                           <v-flex xs12 sm12 md12>\r\n                            <v-text-field v-model=\"description\" label=\"Description\"></v-text-field>\r\n                            </v-flex>\r\n                            <v-flex xs6 sm6 md6>\r\n                                <v-select v-model=\"idmachinereview\" :items=\"MachineReview\" label=\"MachineReview\">\r\n                                </v-select>\r\n                            </v-flex>\r\n                             <v-flex xs12 sm12 md12>\r\n                            <v-text-field v-model=\"reportdate\" label=\"ReportDate\"></v-text-field>\r\n                            </v-flex>\r\n                    \r\n                        </v-layout>\r\n                        </v-container>\r\n                    </v-card-text>\r\n\r\n                    <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn color=\"blue darken-1\" flat @click=\"close\">Cancelar</v-btn>\r\n                        <v-btn color=\"blue darken-1\" flat @click=\"guardar\">Guardar</v-btn>\r\n                    </v-card-actions>\r\n                    </v-card>\r\n                </v-dialog>\r\n            </v-toolbar>\r\n            <v-data-table\r\n            :headers=\"headers\"\r\n            :items=\"FinalReports\"\r\n            :search=\"search\"\r\n            class=\"elevation-1\"\r\n            >\r\n            <template v-slot:items=\"props\">\r\n                <td class=\"justify-center layout px-0\">\r\n                <v-icon\r\n                    small\r\n                    class=\"mr-2\"\r\n                    @click=\"editItem(props.item)\"\r\n                >\r\n                    edit\r\n                </v-icon>\r\n\r\n                </td>\r\n                <td>{{ props.item.description }}</td>\r\n                <td>{{ props.item.machinereview }}</td>\r\n                <td>{{ props.item.reportdate }}</td>\r\n\r\n              \r\n            \r\n            </template>\r\n            <template v-slot:no-data>\r\n                <v-btn color=\"primary\" @click=\"listar\">Actualizar</v-btn>\r\n            </template>\r\n            </v-data-table>\r\n\r\n        </v-flex> \r\n    </v-layout>\r\n</template>\r\n\r\n<script>\r\n    import axios from 'axios'\r\n    import jsPDF from 'jspdf'\r\n    import autoTable from 'jspdf-autotable'\r\n    export default {\r\n        data(){\r\n            return{\r\n                finalreports:[],\r\n                dialog: false,\r\n                headers: [\r\n                    { text: 'Opciones', value: 'opciones', sortable: false },\r\n                     { text: 'description', value: 'description', sortable: false },\r\n                    { text: 'machinereview', value: 'machinereview', sortable: false },\r\n                    { text: 'reportdate', value: 'reportwdate', sortable: false },\r\n                    \r\n                    \r\n                   \r\n                ],\r\n                search:'',\r\n                editedIndex: -1,\r\n                //Para crear Order\r\n                id: '',\r\n                idmachinereview:'',\r\n                machinereview:[],\r\n                descripcion:'',\r\n                reportdate:'',\r\n            }\r\n        },\r\n\r\n        //Evaluar si se registra o se edita\r\n        computed: {\r\n            \r\n            formTitle () {\r\n            return this.editedIndex === -1 ? 'Nueva FinalReport' : 'Actualizar FinalReport'\r\n            }\r\n        },\r\n\r\n        watch: {\r\n            dialog (val) {\r\n            val || this.close()\r\n            }\r\n        },\r\n\r\n        created () {\r\n            //Esta propiedad es la primera que se ejecuta al iniciar\r\n            this.listar()\r\n            this.select()\r\n        },\r\n\r\n        methods:{\r\n            crearPDF(){\r\n                var columns = [\r\n                    {title: \"Description\", dataKey: \"description\"}, \r\n                    {title: \"MedicalReview\", dataKey: \"medicalreview\"}, \r\n                    {title: \"ReportDate\", dataKey: \"reportdate\"}, \r\n            \r\n                ];\r\n                var rows = [];\r\n\r\n                this.finalreports.map(function(x){\r\n                    rows.push({description:x.description,medicalreview:x.medicalreview,reportdate:x.reportdate});\r\n                });\r\n\r\n                // Only pt supported (not mm or in)\r\n                var doc = new jsPDF('p', 'pt');\r\n                doc.autoTable(columns, rows, {\r\n                    margin: {top: 60},\r\n                    addPageContent: function(data) {\r\n                        doc.text(\"Listado de FinalReports\", 40, 30);\r\n                    }\r\n                });\r\n                doc.save('FinalReports.pdf');\r\n            },\r\n            listar(){\r\n                let me = this;\r\n                axios.get(\"api/finalreport\").then(function(response){\r\n                    me.finalreports = response.data\r\n                }).catch(function(error){\r\n                    console.log(error)\r\n                })\r\n            },\r\n            select(){\r\n                let me = this;\r\n                var machinereviewArray = []\r\n                axios.get(\"api/finalreport\").then(function(response){\r\n                   machinereviewArray=response.data\r\n                    machinereviewArray.map(function(x){\r\n                        me.machinereview.push({text: x.name, value:x.idmachinereview})\r\n                    })\r\n                }).catch(function(error){\r\n                    console.log(error)\r\n                })\r\n            },\r\n\r\n            editItem (item) {\r\n                this.id = item.idfinalreport\r\n                this.idmachinereview=item.idmachinereview\r\n                this.description = item.description\r\n                this.reportdate = item.reportdate\r\n              \r\n                this.editedIndex = 1\r\n                this.dialog = true\r\n            },\r\n\r\n            deleteItem (item) {\r\n                const index = this.desserts.indexOf(item)\r\n                confirm('Are you sure you want to delete this item?') && this.desserts.splice(index, 1)\r\n            },\r\n\r\n            close () {\r\n                this.dialog = false\r\n                this.limpiar()\r\n            },\r\n\r\n            limpiar(){\r\n                this.id=\"\"\r\n                this.idmachinereview=\"\"\r\n                this.description=\"\"\r\n                this.reportdate=\"\"\r\n\r\n                this.editedIndex=-1\r\n            },\r\n\r\n            guardar () {\r\n                if(this.validar()){\r\n                    return;\r\n                }\r\n                if (this.editedIndex > -1) {\r\n                    //Para editar\r\n\r\n                    let me = this\r\n                    axios.put(\"api/finalreport\",{\r\n                        'idfinalreport':me.id,\r\n                        'idmachinereview':me.idmachinereview,\r\n                        'description':me.description,\r\n                        'reportdate':me.reportdate\r\n                        \r\n                    }).then(function(response){\r\n                        me.close()\r\n                        me.listar()\r\n                        me.limpiar()\r\n                    }).catch(function(error){\r\n                        console.log(error)\r\n                    })\r\n                } else {\r\n                    //Para guardar\r\n                    let me = this\r\n                    axios.post(\"api/finalreport\",{\r\n                       'idmachinereview':me.idmachinereview,\r\n                        'description':me.description,\r\n                        'reportdate':me.reportdate\r\n                       \r\n                    }).then(function(response){\r\n                        me.close()\r\n                        me.listar()\r\n                        me.limpiar()\r\n                    }).catch(function(error){\r\n                        console.log(error)\r\n                    })\r\n                }\r\n                this.close()\r\n            },\r\n          \r\n        \r\n       \r\n        }        \r\n    }\r\n</script>"]}]}